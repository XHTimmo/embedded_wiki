# 发出你的信号
因为某种原因，你穿越到了电子电路的世界，你需要靠自己的努力，收集你散落的技能、打造属于你的装备，制作出旅行者号智能车，回到自己的世界(好吧，这个背景故事确实有点牵强，但是还是麻烦你试着带入一下吧，PLZ)。

你独自走在这个到处都是电气设施的世界，路上有不少“电气”生物，你试图向他们寻求帮助，但是你却说不出话，你在马路旁的积水看到了自己倒影，发现自己已经变成了这个模样：
![](assets/Pasted%20image%2020241115020626.png)
浑身黝黑，有很多个金属接口，没有嘴巴、耳朵、鼻子（置于怎么看到的倒影你也别管了），无法与外界产生任何联系。此时，你的大脑里响起来了一句话：探索者，请问是否激活电子电路系统？你毫不犹豫的接受了这个系统的开启，因为这意味着你将是这个世界的主角（至少在你刷过的短视频里是这样的）。
过了不一会，你的脑海里浮现了这样一个消息框：
::: warning 主线任务：点亮第一颗LED灯
- 目标：点亮第一颗LED灯
- 奖励：时间感知能力
:::

拿到第一个任务的你欣喜若狂，想要赶紧完成这个任务，但是你却不知道“什么叫做点亮第一个LED灯”。好在系统的声音响了起来“探索者您好，您需要点亮第一颗LED灯，在您的身体里有按`地址`排序的`输入输出口控制器`，每一个`控制器`有八个`输入输出口`，LED灯就连接在您名为`P2`的`控制器` 上，您只需要将对应的`输入输出口`的信号设置为`0`即可点亮对应的LED灯”
你盘膝而坐屏气凝神，内视了自己的`输入输出口控制器`，发现了确实有8个LED小灯连接在自己的`P2控制器`上。于是，你开始想办法点亮这个8个LED灯。
![](assets/Pasted%20image%2020241115020643.png)
你发现`P2控制器`有八个可以操控的小格子，这些格子里都写着`1`，按着系统的提示，你将连着LED的8个格子都写入了`0`，瞬间，你发现自己身上的八颗小灯亮了起来。完整的代码如下：
```c
#include"reg52.h"
int main(){
	while(1){
		P2 = 0x00； // [!code focus]
	}
}
```

::: info 任务完成
恭喜你，完成了C51历险记的第一个任务，至此，你已经获得了C51单片机的IO（Input Output）输出能力！！！<br>
后面的提示中只会给出关键代码，不会再给出完整的代码框架。并且，你只需要理解高亮的代码行即可(如果无高亮代码则需理解全部)，其他的框架代码会在后续的冒险中揭开面纱
:::

::: details 时间感知能力
你可以感知到，这个世界的时间并不是连续的，是离散的，每一个动作的发生都是固定的时间长度
:::

::: tip 支线任务
- 目标：如何熄灭点亮的LED灯呢？
- 奖励：词条`IO、共阳极`
:::

::: details IO、共阳极
- IO：全称是Input Output,输入输出，在单片机的众多引脚中，绝大多数都是通用IO口，可以作为信号的输出，也可以作为信号的输入
- 共阳极：LED灯共有两个引脚，分别为正极和负极，又称阳极和阴极；将许多的二极管的阳极连接在一起，我们称这个连接方式为共阳极；共阴极同理
:::
# 等待

当你亮起小灯的时候，有一个陌生人使用自己的引脚连接上了你`P3`端口的某个引脚，你顿时感觉长脑子了，出现了许多许多的数据，这些数据是关于你的前世今生，关于你本应该拥有的所有的能力，这些知识最后汇聚成了这么一份<a href ="../../C51/C51datasheet.pdf" target="_blank">PDF手册</a>

::: warning 主线任务：了解自己
- 目标：你需要完成第63页的阅读,了解什么是PC、ACC及B寄存器
- 奖励：`你的操作速度`
:::

::: details 奖励：你的操作速度
- 首先我们已经知道了在这个世界的时间是不连续的，就比如是钟摆，但是只存在钟摆摆到两端的时间，不存在钟摆摆动时的时间；电子世界的也有自己的时钟，一个比较常见的时钟源就是晶振
- 晶振：提供一个稳定的震荡信号；在你身上连接的是一个频率为11.0592MHz的晶振，就是每秒钟变化11059200次，每一次震荡所花的时间就是1/11.0592M,我们把这么一个时间称为时钟周期，也就是说，你一秒钟可以操作最多11.0592M次。
:::

为了表达你的谢意，你需要闪烁自己的LED灯向对方表示自己愉悦的情绪，于是乎你开始操作控制器格子内的值，一切看上去都是十分的合理，但是这时候由于你的操作速度极快，like this：
```c
while(1){
	P2 = 0xFF;
	P2 = 0x00;
}
```
1秒之内你可以翻转其中的数据10000次（并不准确），导致对方根本无法察觉到你的LED灯在闪烁，这个时候你意识到，你需要在每次翻转之间进行等待，在心里从1数到100再进行翻转。

::: warning 主线任务：学会数数
- 目标：在翻转之间从1数到100
- 奖励：`精准的数到1s钟`
:::

::: details 更加标准的延时函数
怎么更加精准的数到1呢？拿秒表卡时间来调整减法次数？还是？下面提供了一个标准的延时函数（基于11.0592M的时钟频率）
```c
void delay_ms(unsigned int n)
{
    unsigned int i,j;
    for(i=n;i>0;i--)
        for(y=114;y>0;y--);
}

```
:::

对方看到你闪烁的LED灯之后，感受到了你愉快的心情，向你展示了流水灯（逐个依次点亮）表示自己更加愉快的心情。

::: tip 支线任务：实现流水灯
- 目标：一向不服输的你决定也显示出流水灯的效果
- 奖励： 魅力++
:::

::: info 恭喜
恭喜你完成了第二个主线任务，获得了C51单片机的时间控制能力，拥有这个能力之后，后续你可以控制每一个装备使用的时间间隔，如今你可以显示出各种形式的LED灯组合闪烁
:::
